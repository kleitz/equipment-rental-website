"use strict";angular.module("app.creator",["ngRoute"]).config(["$routeProvider",function(a){a.when("/create",{templateUrl:"views/item/creator/creator.html",controller:"itemCreatorCtrl"})}]).controller("itemCreatorCtrl",["$rootScope","$scope","$http","$routeParams",function(a,b,d,c){b.product={};b.message={button:"Create",submit:"loading",loading:"processing",failed:"failed",error:{image:{enable:false,text:"image cannot be empty"},title:{enable:false,text:"title cannot be empty"},description:{enable:false,text:"description cannot be empty"},days:{enable:false,text:"days cannot be empty"},}};b.uploadButtonClass=[];if(a.loggedIn){b.fileChange=function(g){var f=document.getElementById("fileUploader").files[0];var h=document.getElementById("imagePreview");if(f){var e=new FileReader();e.onloadend=function(){h.src=e.result};e.readAsDataURL(f)}};b.create=function(f){if(!b.uploadSuccess){if(!f.base64){b.message.error.image.enable=true}else{b.message.error.image.enable=false}if(!f.title){b.message.error.title.enable=true}else{b.message.error.title.enable=false}if(!f.description){b.message.error.description.enable=true}else{b.message.error.description.enable=false}if(!f.days){b.message.error.days.enable=true}else{b.message.error.days.enable=false}if(f){if(f.base64&&f.title&&f.description&&f.days){console.log(f);b.message.button=b.message.loading;var e=new FormData();e.append("title",f.title);e.append("description",f.description);e.append("rental_period_limit",f.days);e.append("image",f.base64[0].base64);e.append("filetype",f.base64[0].filetype);d({url:backend+"/p",method:"POST",dataType:"multipart/form-data",data:e,transformRequest:angular.identity,headers:{"Content-Type":undefined,token:window.sessionStorage.token,}}).success(function(i,g,j,h){b.message.button=b.uploadSuccess=true;b.success=true}).error(function(i,g,j,h){b.success=false})}}}}}else{}}]);